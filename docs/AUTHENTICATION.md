# è®¤è¯åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

Dockeré•œåƒåŒæ­¥å·¥å…·ç°åœ¨å·²ç»é›†æˆäº†å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼Œç¡®ä¿åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½æ‰§è¡Œé•œåƒåŒæ­¥æ“ä½œã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” å®‰å…¨è®¤è¯
- **ç”¨æˆ·å/å¯†ç ç™»å½•**ï¼šæ”¯æŒä¼ ç»Ÿçš„ç”¨æˆ·åå¯†ç è®¤è¯
- **å¯†ç åŠ å¯†å­˜å‚¨**ï¼šä½¿ç”¨bcryptç®—æ³•å®‰å…¨å­˜å‚¨å¯†ç å“ˆå¸Œ
- **ä¼šè¯ç®¡ç†**ï¼šæ”¯æŒä¼šè¯è¶…æ—¶å’Œ"è®°ä½æˆ‘"åŠŸèƒ½
- **ç™»å½•ä¿æŠ¤**ï¼šé˜²æ­¢æš´åŠ›ç ´è§£ï¼Œæ”¯æŒè´¦æˆ·é”å®šæœºåˆ¶

### ğŸ‘¤ ç”¨æˆ·ç®¡ç†
- **è§’è‰²æƒé™**ï¼šæ”¯æŒç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è§’è‰²
- **ç”¨æˆ·ä¿¡æ¯**ï¼šæ˜¾ç¤ºç”¨æˆ·åã€è§’è‰²ã€ç™»å½•æ—¶é—´ç­‰ä¿¡æ¯
- **å¯†ç ä¿®æ”¹**ï¼šç”¨æˆ·å¯ä»¥è‡ªè¡Œä¿®æ”¹å¯†ç 
- **è´¦æˆ·çŠ¶æ€**ï¼šæ”¯æŒå¯ç”¨/ç¦ç”¨ç”¨æˆ·è´¦æˆ·

### ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§
- **ä¼šè¯è¶…æ—¶**ï¼šé»˜è®¤1å°æ—¶ä¼šè¯è¶…æ—¶
- **ç™»å½•å°è¯•é™åˆ¶**ï¼šæœ€å¤š5æ¬¡å¤±è´¥å°è¯•åé”å®šè´¦æˆ·
- **è´¦æˆ·é”å®š**ï¼šå¤±è´¥ç™»å½•åé”å®š5åˆ†é’Ÿ
- **å®‰å…¨æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰ç™»å½•å°è¯•å’Œæ“ä½œæ—¥å¿—

## é»˜è®¤è´¦æˆ·

ç³»ç»Ÿæä¾›ä¸€ä¸ªé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š

- **ç”¨æˆ·å**ï¼š`admin`
- **å¯†ç **ï¼š`admin123`
- **è§’è‰²**ï¼šç®¡ç†å‘˜

> âš ï¸ **å®‰å…¨æé†’**ï¼šé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ä½¿ç”¨æµç¨‹

### 1. è®¿é—®ç³»ç»Ÿ
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://your-server:5000`

ç³»ç»Ÿä¼šè‡ªåŠ¨é‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚

### 2. ç™»å½•
1. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
2. å¯é€‰æ‹©"è®°ä½æˆ‘"ï¼ˆ7å¤©å†…å…ç™»å½•ï¼‰
3. ç‚¹å‡»"ç™»å½•"æŒ‰é’®

### 3. ä½¿ç”¨ç³»ç»Ÿ
ç™»å½•æˆåŠŸåå¯ä»¥ï¼š
- æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ï¼ˆå³ä¸Šè§’ç”¨æˆ·èœå•ï¼‰
- æ‰§è¡Œé•œåƒåŒæ­¥æ“ä½œ
- ä¿®æ”¹ä¸ªäººå¯†ç 
- å®‰å…¨é€€å‡ºç™»å½•

### 4. ä¿®æ”¹å¯†ç 
1. ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·èœå•
2. é€‰æ‹©"ä¿®æ”¹å¯†ç "
3. è¾“å…¥å½“å‰å¯†ç å’Œæ–°å¯†ç 
4. ç¡®è®¤ä¿®æ”¹

### 5. é€€å‡ºç™»å½•
ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·èœå•ä¸­çš„"é€€å‡ºç™»å½•"

## é…ç½®æ–‡ä»¶

ç”¨æˆ·é…ç½®æ–‡ä»¶ä½äºï¼š`config/users.yaml`

### é…ç½®ç»“æ„

```yaml
# ç”¨æˆ·é…ç½®
users:
  admin:
    username: "admin"
    password_hash: "$2b$12$..."  # bcryptå“ˆå¸Œ
    role: "admin"
    display_name: "ç®¡ç†å‘˜"
    email: "admin@example.com"
    active: true

# ä¼šè¯é…ç½®
session:
  secret_key: "your-secret-key"  # ç”Ÿäº§ç¯å¢ƒè¯·æ›´æ¢
  session_timeout: 3600          # ä¼šè¯è¶…æ—¶ï¼ˆç§’ï¼‰
  remember_me_duration: 604800   # è®°ä½æˆ‘æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰

# å®‰å…¨é…ç½®
security:
  max_login_attempts: 5    # æœ€å¤§ç™»å½•å°è¯•æ¬¡æ•°
  lockout_duration: 300    # è´¦æˆ·é”å®šæ—¶é—´ï¼ˆç§’ï¼‰
  password_min_length: 6   # å¯†ç æœ€å°é•¿åº¦
```

## æ·»åŠ æ–°ç”¨æˆ·

### æ–¹æ³•1ï¼šæ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶

1. ç”Ÿæˆå¯†ç å“ˆå¸Œï¼š
```bash
python3 generate_password.py
```

2. ç¼–è¾‘ `config/users.yaml`ï¼š
```yaml
users:
  newuser:
    username: "newuser"
    password_hash: "$2b$12$..."  # ä½¿ç”¨ç”Ÿæˆçš„å“ˆå¸Œ
    role: "user"
    display_name: "æ–°ç”¨æˆ·"
    email: "newuser@example.com"
    active: true
```

3. é‡å¯åº”ç”¨ä½¿é…ç½®ç”Ÿæ•ˆ

### æ–¹æ³•2ï¼šé€šè¿‡APIï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

```bash
curl -X POST -H "Content-Type: application/json" \
  -d '{"username":"newuser","password":"password123","role":"user"}' \
  http://localhost:5000/api/admin/users
```

## å®‰å…¨å»ºè®®

### ğŸ”’ å¯†ç å®‰å…¨
- ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- å®šæœŸæ›´æ¢å¯†ç 
- ä¸è¦ä½¿ç”¨é»˜è®¤å¯†ç 

### ğŸ›¡ï¸ ç³»ç»Ÿå®‰å…¨
- æ›´æ¢é»˜è®¤çš„session secret_key
- å¯ç”¨HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- å®šæœŸå¤‡ä»½ç”¨æˆ·é…ç½®æ–‡ä»¶
- ç›‘æ§ç™»å½•æ—¥å¿—

### ğŸŒ ç½‘ç»œå®‰å…¨
- ä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®
- é…ç½®åå‘ä»£ç†ï¼ˆå¦‚Nginxï¼‰
- å¯ç”¨è®¿é—®æ—¥å¿—è®°å½•

## æ•…éšœæ’é™¤

### ç™»å½•å¤±è´¥
1. **å¯†ç é”™è¯¯**ï¼šæ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®
2. **è´¦æˆ·é”å®š**ï¼šç­‰å¾…5åˆ†é’Ÿåé‡è¯•ï¼Œæˆ–è”ç³»ç®¡ç†å‘˜
3. **è´¦æˆ·ç¦ç”¨**ï¼šè”ç³»ç®¡ç†å‘˜å¯ç”¨è´¦æˆ·

### ä¼šè¯é—®é¢˜
1. **ä¼šè¯è¿‡æœŸ**ï¼šé‡æ–°ç™»å½•
2. **Cookieé—®é¢˜**ï¼šæ¸…é™¤æµè§ˆå™¨Cookieåé‡è¯•

### é…ç½®é—®é¢˜
1. **é…ç½®æ–‡ä»¶é”™è¯¯**ï¼šæ£€æŸ¥YAMLè¯­æ³•æ˜¯å¦æ­£ç¡®
2. **å¯†ç å“ˆå¸Œé”™è¯¯**ï¼šä½¿ç”¨generate_password.pyé‡æ–°ç”Ÿæˆ

## APIæ¥å£

### ç™»å½•
```bash
POST /api/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123",
  "remember_me": false
}
```

### ç™»å‡º
```bash
POST /api/logout
```

### è·å–ç”¨æˆ·ä¿¡æ¯
```bash
GET /api/user/info
```

### ä¿®æ”¹å¯†ç 
```bash
POST /api/user/change-password
Content-Type: application/json

{
  "old_password": "old123",
  "new_password": "new123"
}
```

## æ—¥å¿—è®°å½•

ç³»ç»Ÿä¼šè®°å½•ä»¥ä¸‹å®‰å…¨ç›¸å…³äº‹ä»¶ï¼š
- ç™»å½•æˆåŠŸ/å¤±è´¥
- å¯†ç ä¿®æ”¹
- è´¦æˆ·é”å®š/è§£é”
- ä¼šè¯åˆ›å»º/é”€æ¯
- åŒæ­¥ä»»åŠ¡æ“ä½œ

æ—¥å¿—æ ¼å¼ï¼š
```
INFO:__main__:ç”¨æˆ· admin ç™»å½•æˆåŠŸï¼ŒIP: 192.168.1.100
WARNING:__main__:ç”¨æˆ· admin ç™»å½•å¤±è´¥: å¯†ç é”™è¯¯, IP: 192.168.1.100
INFO:__main__:ç”¨æˆ· admin ä¿®æ”¹å¯†ç æˆåŠŸ
INFO:__main__:ç”¨æˆ· admin å¯åŠ¨åŒæ­¥ä»»åŠ¡ sync_1234567890
```

## æŠ€æœ¯å®ç°

- **åç«¯æ¡†æ¶**ï¼šFlask + Flask-SocketIO
- **å¯†ç åŠ å¯†**ï¼šbcrypt
- **ä¼šè¯ç®¡ç†**ï¼šFlask Session
- **å‰ç«¯æ¡†æ¶**ï¼šBootstrap 5 + JavaScript
- **é…ç½®æ ¼å¼**ï¼šYAML

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-24)
- âœ… åˆå§‹è®¤è¯ç³»ç»Ÿå®ç°
- âœ… ç”¨æˆ·ç™»å½•/ç™»å‡ºåŠŸèƒ½
- âœ… å¯†ç ä¿®æ”¹åŠŸèƒ½
- âœ… ä¼šè¯ç®¡ç†
- âœ… å®‰å…¨é˜²æŠ¤æœºåˆ¶
- âœ… ç”¨æˆ·ç•Œé¢é›†æˆ 